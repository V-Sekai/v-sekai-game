name: Generate build constants
description: Generate build constants
runs:
  using: "composite"
  steps:
      - name: Generate build constants
        shell: bash
        run: |
          export BUILD_LABEL="${{ github.repository }}/${{ github.sha }}"
          export BUILD_DATE_STR="$(date --utc --iso=seconds)"
          export BUILD_UNIX_TIME="$(date +%s)"
          export BUILD_URL="${{ github.server_url }}/${{ github.repository }}/commit/${{ github.sha }}"
          cat << EOF > addons/vsk_version/build_constants.gd
          ## AUTOGENERATED BY BUILD
          const BUILD_LABEL = "$BUILD_LABEL"
          const BUILD_DATE_STR = "$BUILD_DATE_STR"
          const BUILD_UNIX_TIME = "$BUILD_UNIX_TIME"
          const BUILD_URL = "$BUILD_URL"
          EOF
          cat addons/vsk_version/build_constants.gd
